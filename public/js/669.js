"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[669],{7554:(t,e,r)=>{r.d(e,{Z:()=>i});var s=r(4015),n=r.n(s),a=r(3645),o=r.n(a)()(n());o.push([t.id,".card-body[data-v-3cfc33b2] table>tbody>tr>td{cursor:pointer}","",{version:3,sources:["webpack://./resources/js/components/admin/users/Users.vue"],names:[],mappings:"AA6KA,8CACA,cACA",sourcesContent:['<template>\r\n  <div class="users">\r\n    <div class="page-title-box">\r\n\t\t\t<div class="row">\r\n        <template v-if="showErrorMessage || showSuccessMessage">\r\n            <div class="alert" :class="showErrorMessage ? \'alert-danger\' : \'alert-success\'" role="alert" v-html="message"></div>\r\n        </template>\r\n\t\t\t\t<div class="col">\r\n\t\t\t\t\t<h4 class="page-title">User List</h4>\r\n\t\t\t\t\t<ol class="breadcrumb">\r\n\t\t\t\t\t\t<li class="breadcrumb-item"><a href="/admin/dashboard">Dashboard</a></li>\r\n\t\t\t\t\t\t<li class="breadcrumb-item"><a href="javascript:void(0);">Users</a></li>\r\n\t\t\t\t\t\t<li class="breadcrumb-item active">List</li>\r\n\t\t\t\t\t</ol>\r\n\t\t\t\t</div>\x3c!--end col--\x3e\r\n\t\t\t\t<div class="col-auto align-self-center">\r\n\t\t\t\t\t<button class="btn btn-default" @click="createUser">Create</button>\r\n\t\t\t\t</div>\x3c!--end col--\x3e  \r\n\t\t\t</div>\x3c!--end row--\x3e                                                              \r\n\t\t</div>\r\n\t\t<div class="card">\r\n\t\t\t<div class="card-header">\r\n\t\t\t\t<h2>Users </h2>\r\n\t\t\t</div>\r\n\t\t\t<div class="card-body table-responsive">\r\n\t\t\t\t<table class="table table-striped table-responsive">\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t  <tr>\r\n\t\t\t\t\t\t\x3c!-- <th scope="col">ID</th> --\x3e\r\n\t\t\t\t\t\t<th scope="col">Name</th>\r\n\t\t\t\t\t\t<th scope="col">Email</th>\r\n\t\t\t\t\t\t<th scope="col">Mobile</th>\r\n\t\t\t\t\t\t<th scope="col">Address</th>\r\n\t\t\t\t\t\t<th scope="col">Avatar</th>\r\n\t\t\t\t\t\t<th scope="col">User Type</th>\r\n\t\t\t\t\t\t<th scope="col">Action</th>\r\n\t\t\t\t\t  </tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t  <tr v-for="item in items" :key="item.id">\r\n              \x3c!-- <th scope="row">{{item.id }}</th> --\x3e\r\n              <td>{{ item.first_name+(item.middle_name !=null ? \' \'+item.middle_name : \'\')+\' \'+(item.last_name !=null ? \' \'+item.last_name : \'\') }}</td>\r\n              <td>{{ item.email }}</td>\r\n              <td>{{ item.mobile }}</td>\r\n              <td>{{ item.address }}</td>\r\n              <td><img v-if="item.avatar != \'\' && item.avatar != null" :src="(item.provider != null) ? item.avatar : rootUrl+\'/storage/\'+item.avatar" alt="" style="width: 100px;" /></td>\r\n              <td>{{ item.user_type | capitalize }}</td>\r\n              <td>\r\n                <button class="btn btn-sm btn-secondary" @click="showUser( item.id )"><i class="far fa-eye"></i> View</button>\r\n                <button class="btn btn-sm btn-warning" @click="editUser( item.id )"><i class="far fa-edit"></i> Edit</button>\r\n                <button class="btn btn-sm btn-danger" @click="deleteUser( item.id )"><i class="fas fa-trash"></i> Delete</button>\r\n              </td>\r\n\t\t\t\t\t  </tr>\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\t\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \'axios\'\r\nimport Swal from \'sweetalert2\'\r\nconst qs = require(\'querystring\');\r\n\r\nexport default {\r\n  name: \'Users\',\r\n  beforeRouteEnter (to, from, next) {\r\n    document.title = \'Users\';\r\n    $(\'meta[name="description"]\').attr("content", \'Rayzen\');\r\n    $(\'meta[property="og:title"]\').attr("content", \'New Title\');\r\n    next()\r\n  },\r\n  data: () => {\r\n    return {\r\n      rootUrl: process.env.MIX_APP_URL,\r\n      showErrorMessage: false,\r\n      showSuccessMessage: false,\r\n      items: [],\r\n      message: \'\',\r\n    }\r\n  },\r\n  computed: {\r\n  },\r\n  methods: {\r\n    createUser () {\r\n      this.$router.push({path: \'users/create\'});\r\n    },\r\n    userLink (id) {\r\n      return `users/${id.toString()}`\r\n    },\r\n    editUserLink (id) {\r\n      return `users/${id.toString()}/edit`\r\n    },\r\n    showUser ( id ) {\r\n      const userLink = this.userLink( id );\r\n      this.$router.push({path: userLink}).catch(error => { console.log });\r\n    },\r\n    editUser ( id ) {\r\n      const editUser = this.editUserLink( id );\r\n      this.$router.push({path: editUser}).catch(error => { console.log });\r\n      // this.$router.push({path: \'users/38/edit\'}).catch(error => { console.log });\r\n    },\r\n    deleteUser ( id ) {\r\n      let self = this;\r\n\r\n      Swal.fire({\r\n        title: \'Are you sure you want to delete user?\',\r\n        confirmButtonColor: \'#3085d6\',\r\n        cancelButtonColor: \'#d33\',\r\n        showCancelButton: true,\r\n        confirmButtonText: \'Okay\',\r\n      }).then((result) => {\r\n        /* Read more about isConfirmed, isDenied below */\r\n        if (result.isConfirmed) {\r\n          axios.post(process.env.MIX_APP_URL+\'/api/users/\'+id, { _method: \'DELETE\' }, {\r\n            headers: {\r\n              \'Authorization\': \'Bearer \'+localStorage.getItem("api_token") \r\n            }\r\n          })\r\n          .then(function (response) {\r\n            if(response.data) {\r\n              Swal.fire({\r\n                title: \'Success\',\r\n                text: \'User deleted successfully\',\r\n                confirmButtonText: \'Okay\'\r\n              })\r\n              self.getUsers();\r\n            }\r\n          }).catch(function (error) {\r\n            self.$router.push({ path: \'/admin/login\' });\r\n          });\r\n        }\r\n      })\r\n    },\r\n    \r\n    getUsers (){\r\n      let self = this;\r\n      axios.get(process.env.MIX_APP_URL+\'/api/users\', {\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t\'Authorization\': \'Bearer \'+localStorage.getItem("api_token") \r\n\t\t\t\t}\r\n\t\t\t})\r\n      .then(function (response) {\r\n        self.items = response.data.all_users;\r\n      }).catch(function (error) {\r\n        self.$router.push({ path: \'/admin/login\' });\r\n      });\r\n    },\r\n\r\n    timerMessageHide() {\r\n      setTimeout(() => {\r\n          this.message = \'\';\r\n          this.showSuccessMessage = false;\r\n          this.showErrorMessage = false;\r\n      }, 2000);\r\n    }\r\n  },\r\n  mounted: function(){\r\n    this.getUsers();\r\n  },\r\n  metaInfo: {\r\n    // Children can override the title.\r\n    title: \'All Users\',\r\n    // Define meta tags here.\r\n    meta: [\r\n      {name: \'description\', content: \'Manage All Users.\'}\r\n    ]\r\n  }\r\n}\r\n<\/script>\r\n\r\n<style scoped>\r\n.card-body >>> table > tbody > tr > td {\r\n  cursor: pointer;\r\n}\r\n</style>\r\n'],sourceRoot:""}]);const i=o},2587:t=>{function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,r,s,n){r=r||"&",s=s||"=";var a={};if("string"!=typeof t||0===t.length)return a;var o=/\+/g;t=t.split(r);var i=1e3;n&&"number"==typeof n.maxKeys&&(i=n.maxKeys);var c=t.length;i>0&&c>i&&(c=i);for(var l=0;l<c;++l){var d,u,m,h,p=t[l].replace(o,"%20"),v=p.indexOf(s);v>=0?(d=p.substr(0,v),u=p.substr(v+1)):(d=p,u=""),m=decodeURIComponent(d),h=decodeURIComponent(u),e(a,m)?Array.isArray(a[m])?a[m].push(h):a[m]=[a[m],h]:a[m]=h}return a}},2361:t=>{var e=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,r,s,n){return r=r||"&",s=s||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(n){var a=encodeURIComponent(e(n))+s;return Array.isArray(t[n])?t[n].map((function(t){return a+encodeURIComponent(e(t))})).join(r):a+encodeURIComponent(e(t[n]))})).join(r):n?encodeURIComponent(e(n))+s+encodeURIComponent(e(t)):""}},7673:(t,e,r)=>{e.decode=e.parse=r(2587),e.encode=e.stringify=r(2361)},669:(t,e,r)=>{r.r(e),r.d(e,{default:()=>m});var s=r(9669),n=r.n(s),a=r(6455),o=r.n(a);r(7673);const i={name:"Users",beforeRouteEnter:function(t,e,r){document.title="Users",$('meta[name="description"]').attr("content","Rayzen"),$('meta[property="og:title"]').attr("content","New Title"),r()},data:function(){return{rootUrl:"https://encompass.fncci.org",showErrorMessage:!1,showSuccessMessage:!1,items:[],message:""}},computed:{},methods:{createUser:function(){this.$router.push({path:"users/create"})},userLink:function(t){return"users/".concat(t.toString())},editUserLink:function(t){return"users/".concat(t.toString(),"/edit")},showUser:function(t){var e=this.userLink(t);this.$router.push({path:e}).catch((function(t){console.log}))},editUser:function(t){var e=this.editUserLink(t);this.$router.push({path:e}).catch((function(t){console.log}))},deleteUser:function(t){var e=this;o().fire({title:"Are you sure you want to delete user?",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",showCancelButton:!0,confirmButtonText:"Okay"}).then((function(r){r.isConfirmed&&n().post("https://encompass.fncci.org/api/users/"+t,{_method:"DELETE"},{headers:{Authorization:"Bearer "+localStorage.getItem("api_token")}}).then((function(t){t.data&&(o().fire({title:"Success",text:"User deleted successfully",confirmButtonText:"Okay"}),e.getUsers())})).catch((function(t){e.$router.push({path:"/admin/login"})}))}))},getUsers:function(){var t=this;n().get("https://encompass.fncci.org/api/users",{headers:{Authorization:"Bearer "+localStorage.getItem("api_token")}}).then((function(e){t.items=e.data.all_users})).catch((function(e){t.$router.push({path:"/admin/login"})}))},timerMessageHide:function(){var t=this;setTimeout((function(){t.message="",t.showSuccessMessage=!1,t.showErrorMessage=!1}),2e3)}},mounted:function(){this.getUsers()},metaInfo:{title:"All Users",meta:[{name:"description",content:"Manage All Users."}]}};var c=r(3379),l=r.n(c),d=r(7554),u={insert:"head",singleton:!1};l()(d.Z,u);d.Z.locals;const m=(0,r(1900).Z)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"users"},[r("div",{staticClass:"page-title-box"},[r("div",{staticClass:"row"},[t.showErrorMessage||t.showSuccessMessage?[r("div",{staticClass:"alert",class:t.showErrorMessage?"alert-danger":"alert-success",attrs:{role:"alert"},domProps:{innerHTML:t._s(t.message)}})]:t._e(),t._v(" "),t._m(0),t._v(" "),r("div",{staticClass:"col-auto align-self-center"},[r("button",{staticClass:"btn btn-default",on:{click:t.createUser}},[t._v("Create")])])],2)]),t._v(" "),r("div",{staticClass:"card"},[t._m(1),t._v(" "),r("div",{staticClass:"card-body table-responsive"},[r("table",{staticClass:"table table-striped table-responsive"},[t._m(2),t._v(" "),r("tbody",t._l(t.items,(function(e){return r("tr",{key:e.id},[r("td",[t._v(t._s(e.first_name+(null!=e.middle_name?" "+e.middle_name:"")+" "+(null!=e.last_name?" "+e.last_name:"")))]),t._v(" "),r("td",[t._v(t._s(e.email))]),t._v(" "),r("td",[t._v(t._s(e.mobile))]),t._v(" "),r("td",[t._v(t._s(e.address))]),t._v(" "),r("td",[""!=e.avatar&&null!=e.avatar?r("img",{staticStyle:{width:"100px"},attrs:{src:null!=e.provider?e.avatar:t.rootUrl+"/storage/"+e.avatar,alt:""}}):t._e()]),t._v(" "),r("td",[t._v(t._s(t._f("capitalize")(e.user_type)))]),t._v(" "),r("td",[r("button",{staticClass:"btn btn-sm btn-secondary",on:{click:function(r){return t.showUser(e.id)}}},[r("i",{staticClass:"far fa-eye"}),t._v(" View")]),t._v(" "),r("button",{staticClass:"btn btn-sm btn-warning",on:{click:function(r){return t.editUser(e.id)}}},[r("i",{staticClass:"far fa-edit"}),t._v(" Edit")]),t._v(" "),r("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(r){return t.deleteUser(e.id)}}},[r("i",{staticClass:"fas fa-trash"}),t._v(" Delete")])])])})),0)])])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col"},[r("h4",{staticClass:"page-title"},[t._v("User List")]),t._v(" "),r("ol",{staticClass:"breadcrumb"},[r("li",{staticClass:"breadcrumb-item"},[r("a",{attrs:{href:"/admin/dashboard"}},[t._v("Dashboard")])]),t._v(" "),r("li",{staticClass:"breadcrumb-item"},[r("a",{attrs:{href:"javascript:void(0);"}},[t._v("Users")])]),t._v(" "),r("li",{staticClass:"breadcrumb-item active"},[t._v("List")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card-header"},[r("h2",[t._v("Users ")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",{attrs:{scope:"col"}},[t._v("Name")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Email")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Mobile")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Address")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Avatar")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("User Type")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("Action")])])])}],!1,null,"3cfc33b2",null).exports}}]);
//# sourceMappingURL=669.js.map